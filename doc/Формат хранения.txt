Формат хранения:

Вся информация о файловой системе хранится в одном файле.
Файл делится на 3 части:
- Заголовок;
- Таблица тэгов;
- Таблица файлов.
= В заголовке содержатся общие сведения: метка файловой системы, разметочные данные.
= В таблице тэгов содержатся линейный список тэгов. Каждый тэг занимает один блок (обычно 256 байт) и содержит информацию об имени тэга и его флагах.
Длина имени тэга ограничена размером блока тэга и больше быть не может (обрезается). Каждый тэг имеет номер который вычисляетс я как номер блока в таблице тэгов (и счёт с нуля).
= В таблице файлов содержатся файловые блоки. И одна запись о файле может содержать один или несколько блоков. Блоки формируют двусвязанный список. Суммарный объём данных 
в блоках составляет файловую запись. Номер файла определяется как начальный номер блока в списке. Т.е. номера могут быть разреженные.

Формат файла:
----
0x0000 - Заголовок:
+0x00 (4 байт) - MagicWord: 0 - 43h; 1 - 23h; 2 - 56h; 3 - 35h (числовые поля big-endian) / 0 - 43h; 1 - 23h; 2 - 56h; 3 - 34h (числовые поля little-endian)
+0x04 (4 байт) - падинг (0)
+0x08 (8 байт) - позиция таблицы тегов (абсолютное смещение от начала файла). Выровнено на 256 байт.
+0x10 (8 байт) - позиция таблицы с файловыми блоками. Выровнено на 256 байт.
+0x18 (2 байт) - размер записи для одного тэга, кратно 8 байт, (минимум 24 байта)
+0x1a (2 байт) - количество записей тэгов (дефолт = 64)
+0x1c (2 байт) - количество заполненных записей тэгов
+0x1e (2 байт) - гранулярность (размер файлового блока) для таблицы с файлами. Кратно 8 байт.
+0x20 (8 байт) - количество файловых блоков
---
Таблица тэгов. Состоит из записей тэгов. Формат одной записи (размер см. в заголовке, кратно 8 байт):
+0x00 (2 байт) - флаги тэга: если все нули - тэг не используется
+0x02 (2 байт) - длина имени
+0x04 (n байт) - имя (всё должно помещаться в размер записи для одного тэга)
---
Таблица с файловыми блоками. Содержат блоки, один за другим. Размер блока задан в заголовке. Положение блока явно определяется по его номеру (отсчёт с нуля).
Блоки могут образовывать цепочки (двусвязные списки), формата:
+0x00 (8 байт) - номер предыдущего блока. Также может содержать: номер самого блока, если это первый блок в цепочке; -1 если это незанятый блок; -2 если это зарезервированный блок (для дальнейших операций)
+0x08 (8 байт) - номер следующего блока. Также может содержать: номер самого блока, если это последний блок; -1 если в цепочке есть ошибка (неполная запись и т.п.)
+0x10 (n байт) - данные по файлу (до конца блока)

Данные файловых блоков одной цепочки объединяются в единый блок, имеющий формат:
+0x00 (2 байт) - Размер поля тэгов
+0x02 (2 байт) - Размер имени файла
+0x04 (4 байт) - Размер строки со ссылкой
+0x08 (8 байт) - поле тэгов
+сразу за полем тэгов (n байт) - имя файла (как он представляется в виртуальной файловой системе)
+сразу за полем имени (n байт) - строка-ссылка

